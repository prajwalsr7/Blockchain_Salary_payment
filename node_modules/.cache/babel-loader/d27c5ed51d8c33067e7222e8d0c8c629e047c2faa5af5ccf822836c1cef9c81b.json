{"ast":null,"code":"import _typeof from \"@babel/runtime/helpers/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useRef, useEffect, useImperativeHandle, useState, useMemo } from 'react';\nimport CodeMirror from 'codemirror';\nimport 'codemirror/mode/meta';\nimport './codemirror.css';\nvar defaultOptions = {\n  tabSize: 2,\n  autoCloseBrackets: true,\n  matchBrackets: true,\n  showCursorWhenSelecting: true,\n  // 显示行号\n  lineNumbers: true,\n  fullScreen: true\n};\nfunction ReactCodeMirror() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var ref = arguments.length > 1 ? arguments[1] : undefined;\n  var _props$options = props.options,\n    options = _props$options === void 0 ? {} : _props$options,\n    _props$value = props.value,\n    value = _props$value === void 0 ? '' : _props$value,\n    _props$width = props.width,\n    width = _props$width === void 0 ? '100%' : _props$width,\n    _props$height = props.height,\n    height = _props$height === void 0 ? '100%' : _props$height;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    editor = _useState2[0],\n    setEditor = _useState2[1];\n  var textareaRef = useRef();\n  var lastestProps = useRef(props);\n  useImperativeHandle(ref, function () {\n    return {\n      editor: editor\n    };\n  }, [editor]);\n  lastestProps.current = props; // 将props中所有的事件处理函数映射并保存\n\n  function getEventHandleFromProps() {\n    var propNames = Object.keys(props);\n    var eventHandle = propNames.filter(function (keyName) {\n      return /^on+/.test(keyName);\n    });\n    var eventDict = {};\n    eventHandle.forEach(function (ele) {\n      var name = ele.slice(2);\n      if (name && name[0]) {\n        eventDict[ele] = name.replace(name[0], name[0].toLowerCase());\n      }\n    });\n    return eventDict;\n  } // http://codemirror.net/doc/manual.html#config\n\n  function setOptions(_x) {\n    return _setOptions.apply(this, arguments);\n  }\n  function _setOptions() {\n    _setOptions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(instance) {\n      var opt,\n        mode,\n        _args = arguments;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              opt = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n              if (!(_typeof(opt) === 'object' && window)) {\n                _context.next = 8;\n                break;\n              }\n              mode = CodeMirror.findModeByName(opt.mode || '');\n              if (!(mode && mode.mode)) {\n                _context.next = 6;\n                break;\n              }\n              _context.next = 6;\n              return import(\"codemirror/mode/\".concat(mode.mode, \"/\").concat(mode.mode, \".js\"));\n            case 6:\n              if (mode) {\n                opt.mode = mode.mime;\n              }\n              Object.keys(opt).forEach(function (name) {\n                if ((opt[name] || opt[name] === false) && JSON.stringify(opt[name])) {\n                  instance.setOption(name, opt[name]);\n                }\n              });\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _setOptions.apply(this, arguments);\n  }\n  useEffect(function () {\n    if (!editor && window) {\n      // 生成codemirror实例\n      var instance = CodeMirror.fromTextArea(textareaRef.current, _objectSpread(_objectSpread({}, defaultOptions), options));\n      var eventDict = getEventHandleFromProps();\n      Object.keys(eventDict).forEach(function (event) {\n        instance.on(eventDict[event], function () {\n          var _lastestProps$current;\n          return (_lastestProps$current = lastestProps.current)[event].apply(_lastestProps$current, arguments);\n        });\n      });\n      instance.setValue(value || '');\n      if (width || height) {\n        // 设置尺寸\n        instance.setSize(width, height);\n      }\n      setEditor(instance);\n      setOptions(instance, _objectSpread(_objectSpread({}, defaultOptions), options));\n    }\n    return function () {\n      if (editor && window) {\n        editor.toTextArea();\n        setEditor(undefined);\n      }\n    };\n  }, []);\n  useMemo(function () {\n    if (!editor || !window) return;\n    var val = editor.getValue();\n    if (value !== undefined && value !== val) {\n      editor.setValue(value);\n    }\n  }, [value]);\n  useMemo(function () {\n    if (!editor || !window) return;\n    editor.setSize(width, height);\n  }, [width, height]);\n  useMemo(function () {\n    if (!editor || !window) return;\n    setOptions(editor, _objectSpread(_objectSpread({}, defaultOptions), options));\n  }, [editor, options]);\n  return /*#__PURE__*/React.createElement(\"textarea\", {\n    ref: textareaRef\n  });\n}\nexport default /*#__PURE__*/React.forwardRef(ReactCodeMirror);","map":{"version":3,"names":["React","useRef","useEffect","useImperativeHandle","useState","useMemo","CodeMirror","defaultOptions","tabSize","autoCloseBrackets","matchBrackets","showCursorWhenSelecting","lineNumbers","fullScreen","ReactCodeMirror","props","arguments","length","undefined","ref","_props$options","options","_props$value","value","_props$width","width","_props$height","height","_useState","_useState2","_slicedToArray","editor","setEditor","textareaRef","lastestProps","current","getEventHandleFromProps","propNames","Object","keys","eventHandle","filter","keyName","test","eventDict","forEach","ele","name","slice","replace","toLowerCase","setOptions","_x","_setOptions","apply","_asyncToGenerator","_regeneratorRuntime","mark","_callee","instance","opt","mode","_args","wrap","_callee$","_context","prev","next","_typeof","window","findModeByName","concat","mime","JSON","stringify","setOption","stop","fromTextArea","_objectSpread","event","on","_lastestProps$current","setValue","setSize","toTextArea","val","getValue","createElement","forwardRef"],"sources":["C:\\Users\\User\\Downloads\\Multisender-App-main\\node_modules\\@uiw\\react-codemirror\\src\\index.js"],"sourcesContent":["import React, { useRef, useEffect, useImperativeHandle, useState, useMemo } from 'react';\nimport CodeMirror from 'codemirror';\nimport 'codemirror/mode/meta';\nimport './codemirror.css';\n\nconst defaultOptions = {\n  tabSize: 2,\n  autoCloseBrackets: true,\n  matchBrackets: true,\n  showCursorWhenSelecting: true,\n  // 显示行号\n  lineNumbers: true,\n  fullScreen: true,\n}\n\nfunction ReactCodeMirror(props = {}, ref) {\n  const { options = {}, value = '', width = '100%', height = '100%'  } = props;\n  const [editor, setEditor] = useState();\n  const textareaRef = useRef();\n  const lastestProps = useRef(props);\n\n  useImperativeHandle(ref, () => ({ editor }), [editor]);\n  lastestProps.current = props;\n  \n  // 将props中所有的事件处理函数映射并保存\n  function getEventHandleFromProps() {\n    const propNames = Object.keys(props);\n    const eventHandle = propNames.filter((keyName) => {\n      return /^on+/.test(keyName);\n    });\n\n    const eventDict = {};\n    eventHandle.forEach((ele) => {\n      const name = ele.slice(2);\n      if (name && name[0]) {\n        eventDict[ele] = name.replace(name[0], name[0].toLowerCase());\n      }\n    });\n\n    return eventDict;\n  }\n\n  // http://codemirror.net/doc/manual.html#config\n  async function setOptions(instance, opt = {}) {\n    if (typeof opt === 'object' && window) {\n      const mode = CodeMirror.findModeByName(opt.mode || '');\n      if (mode && mode.mode) {\n        await import(`codemirror/mode/${mode.mode}/${mode.mode}.js`);\n      }\n      if (mode) {\n        opt.mode = mode.mime;\n      }\n      Object.keys(opt).forEach((name) => {\n        if ((opt[name] || opt[name] === false) && JSON.stringify(opt[name])) {\n          instance.setOption(name, opt[name]);\n        }\n      });\n    }\n  }\n\n  useEffect(() => {\n    if (!editor && window) {\n      // 生成codemirror实例\n      const instance = CodeMirror.fromTextArea(textareaRef.current, {...defaultOptions, ...options});\n      const eventDict = getEventHandleFromProps();\n      Object.keys(eventDict).forEach((event) => {\n        instance.on(eventDict[event], (...params) => lastestProps.current[event](...params));\n      });\n      instance.setValue(value || '');\n\n      if (width || height) {\n        // 设置尺寸\n        instance.setSize(width, height);\n      }\n      setEditor(instance);\n      setOptions(instance, {...defaultOptions, ...options});\n    }\n    return () => {\n      if (editor && window) {\n        editor.toTextArea();\n        setEditor(undefined);\n      }\n    }\n  }, []);\n\n  useMemo(() => {\n    if (!editor || !window) return;\n    const val = editor.getValue();\n    if (value !== undefined && value !== val) {\n      editor.setValue(value);\n    }\n  }, [value]);\n\n  useMemo(() => {\n    if (!editor || !window) return;\n    editor.setSize(width, height);\n  }, [width, height]);\n\n\n  useMemo(() => {\n    if (!editor || !window) return;\n    setOptions(editor, {...defaultOptions, ...options});\n  }, [editor, options]);\n  \n  return (\n    <textarea ref={textareaRef} />\n  );\n}\n\nexport default React.forwardRef(ReactCodeMirror);\n"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,SAAxB,EAAmCC,mBAAnC,EAAwDC,QAAxD,EAAkEC,OAAlE,QAAiF,OAAjF;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAO,sBAAP;AACA,OAAO,kBAAP;AAEA,IAAMC,cAAc,GAAG;EACrBC,OAAO,EAAE,CADY;EAErBC,iBAAiB,EAAE,IAFE;EAGrBC,aAAa,EAAE,IAHM;EAIrBC,uBAAuB,EAAE,IAJJ;EAKrB;EACAC,WAAW,EAAE,IANQ;EAOrBC,UAAU,EAAE;AAPS,CAAvB;AAUA,SAASC,eAATA,CAAA,EAA0C;EAAA,IAAjBC,KAAiB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAT,EAAS;EAAA,IAALG,GAAK,GAAAH,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EACxC,IAAAE,cAAA,GAAuEL,KAAvE,CAAQM,OAAR;IAAQA,OAAR,GAAAD,cAAA,cAAkB,EAAlB,GAAAA,cAAA;IAAAE,YAAA,GAAuEP,KAAvE,CAAsBQ,KAAtB;IAAsBA,KAAtB,GAAAD,YAAA,cAA8B,EAA9B,GAAAA,YAAA;IAAAE,YAAA,GAAuET,KAAvE,CAAkCU,KAAlC;IAAkCA,KAAlC,GAAAD,YAAA,cAA0C,MAA1C,GAAAA,YAAA;IAAAE,aAAA,GAAuEX,KAAvE,CAAkDY,MAAlD;IAAkDA,MAAlD,GAAAD,aAAA,cAA2D,MAA3D,GAAAA,aAAA;EACA,IAAAE,SAAA,GAA4BxB,QAAQ,EAApC;IAAAyB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAOG,MAAP,GAAAF,UAAA;IAAeG,SAAf,GAAAH,UAAA;EACA,IAAMI,WAAW,GAAGhC,MAAM,EAA1B;EACA,IAAMiC,YAAY,GAAGjC,MAAM,CAACc,KAAD,CAA3B;EAEAZ,mBAAmB,CAACgB,GAAD,EAAM;IAAA,OAAO;MAAEY,MAAM,EAANA;IAAF,CAAP;EAAA,CAAN,EAA0B,CAACA,MAAD,CAA1B,CAAnB;EACAG,YAAY,CAACC,OAAb,GAAuBpB,KAAvB,CAPwC,CASxC;;EACA,SAASqB,uBAATA,CAAA,EAAmC;IACjC,IAAMC,SAAS,GAAGC,MAAM,CAACC,IAAP,CAAYxB,KAAZ,CAAlB;IACA,IAAMyB,WAAW,GAAGH,SAAS,CAACI,MAAV,CAAiB,UAACC,OAAD,EAAa;MAChD,OAAO,OAAOC,IAAP,CAAYD,OAAZ,CAAP;IACD,CAFmB,CAApB;IAIA,IAAME,SAAS,GAAG,EAAlB;IACAJ,WAAW,CAACK,OAAZ,CAAoB,UAACC,GAAD,EAAS;MAC3B,IAAMC,IAAI,GAAGD,GAAG,CAACE,KAAJ,CAAU,CAAV,CAAb;MACA,IAAID,IAAI,IAAIA,IAAI,CAAC,CAAD,CAAhB,EAAqB;QACnBH,SAAS,CAACE,GAAD,CAAT,GAAiBC,IAAI,CAACE,OAAL,CAAaF,IAAI,CAAC,CAAD,CAAjB,EAAsBA,IAAI,CAAC,CAAD,CAAJ,CAAQG,WAAR,EAAtB,CAAjB;MACD;IACF,CALD;IAOA,OAAON,SAAP;EACD,CAzBuC,CA2BxC;;EA3BwC,SA4BzBO,UA5ByBA,CAAAC,EAAA;IAAA,OAAAC,WAAA,CAAAC,KAAA,OAAAtC,SAAA;EAAA;EAAA,SAAAqC,YAAA;IAAAA,WAAA,GAAAE,iBAAA,eAAAC,mBAAA,CAAAC,IAAA,CA4BxC,SAAAC,QAA0BC,QAA1B;MAAA,IAAAC,GAAA;QAAAC,IAAA;QAAAC,KAAA,GAAA9C,SAAA;MAAA,OAAAwC,mBAAA,CAAAO,IAAA,UAAAC,SAAAC,QAAA;QAAA;UAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAoCP,GAApC,GAAAE,KAAA,CAAA7C,MAAA,QAAA6C,KAAA,QAAA5C,SAAA,GAAA4C,KAAA,MAA0C,EAA1C;cAAA,MACMM,OAAA,CAAOR,GAAP,MAAe,QAAf,IAA2BS,MADjC;gBAAAJ,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAEUN,IAFV,GAEiBvD,UAAU,CAACgE,cAAX,CAA0BV,GAAG,CAACC,IAAJ,IAAY,EAAtC,CAFjB;cAAA,MAGQA,IAAI,IAAIA,IAAI,CAACA,IAHrB;gBAAAI,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OAIY,0BAAAI,MAAA,CAA0BV,IAAI,CAACA,IAA/B,OAAAU,MAAA,CAAuCV,IAAI,CAACA,IAA5C,SAJZ;YAAA;cAMI,IAAIA,IAAJ,EAAU;gBACRD,GAAG,CAACC,IAAJ,GAAWA,IAAI,CAACW,IAAhB;cACD;cACDlC,MAAM,CAACC,IAAP,CAAYqB,GAAZ,EAAiBf,OAAjB,CAAyB,UAACE,IAAD,EAAU;gBACjC,IAAI,CAACa,GAAG,CAACb,IAAD,CAAH,IAAaa,GAAG,CAACb,IAAD,CAAH,KAAc,KAA5B,KAAsC0B,IAAI,CAACC,SAAL,CAAed,GAAG,CAACb,IAAD,CAAlB,CAA1C,EAAqE;kBACnEY,QAAQ,CAACgB,SAAT,CAAmB5B,IAAnB,EAAyBa,GAAG,CAACb,IAAD,CAA5B;gBACD;cACF,CAJD;YATJ;YAAA;cAAA,OAAAkB,QAAA,CAAAW,IAAA;UAAA;QAAA;MAAA,GAAAlB,OAAA;IAAA,CA5BwC;IAAA,OAAAL,WAAA,CAAAC,KAAA,OAAAtC,SAAA;EAAA;EA6CxCd,SAAS,CAAC,YAAM;IACd,IAAI,CAAC6B,MAAD,IAAWsC,MAAf,EAAuB;MACrB;MACA,IAAMV,QAAQ,GAAGrD,UAAU,CAACuE,YAAX,CAAwB5C,WAAW,CAACE,OAApC,EAAA2C,aAAA,CAAAA,aAAA,KAAiDvE,cAAjD,GAAoEc,OAApE,EAAjB;MACA,IAAMuB,SAAS,GAAGR,uBAAuB,EAAzC;MACAE,MAAM,CAACC,IAAP,CAAYK,SAAZ,EAAuBC,OAAvB,CAA+B,UAACkC,KAAD,EAAW;QACxCpB,QAAQ,CAACqB,EAAT,CAAYpC,SAAS,CAACmC,KAAD,CAArB,EAA8B;UAAA,IAAAE,qBAAA;UAAA,OAAe,CAAAA,qBAAA,GAAA/C,YAAY,CAACC,OAAb,EAAqB4C,KAArB,EAAAzB,KAAA,CAAA2B,qBAAA,EAAAjE,SAAA,CAAf;QAAA,CAA9B;MACD,CAFD;MAGA2C,QAAQ,CAACuB,QAAT,CAAkB3D,KAAK,IAAI,EAA3B;MAEA,IAAIE,KAAK,IAAIE,MAAb,EAAqB;QACnB;QACAgC,QAAQ,CAACwB,OAAT,CAAiB1D,KAAjB,EAAwBE,MAAxB;MACD;MACDK,SAAS,CAAC2B,QAAD,CAAT;MACAR,UAAU,CAACQ,QAAD,EAAAmB,aAAA,CAAAA,aAAA,KAAevE,cAAf,GAAkCc,OAAlC,EAAV;IACD;IACD,OAAO,YAAM;MACX,IAAIU,MAAM,IAAIsC,MAAd,EAAsB;QACpBtC,MAAM,CAACqD,UAAP;QACApD,SAAS,CAACd,SAAD,CAAT;MACD;IACF,CALD;EAMD,CAvBQ,EAuBN,EAvBM,CAAT;EAyBAb,OAAO,CAAC,YAAM;IACZ,IAAI,CAAC0B,MAAD,IAAW,CAACsC,MAAhB,EAAwB;IACxB,IAAMgB,GAAG,GAAGtD,MAAM,CAACuD,QAAP,EAAZ;IACA,IAAI/D,KAAK,KAAKL,SAAV,IAAuBK,KAAK,KAAK8D,GAArC,EAA0C;MACxCtD,MAAM,CAACmD,QAAP,CAAgB3D,KAAhB;IACD;EACF,CANM,EAMJ,CAACA,KAAD,CANI,CAAP;EAQAlB,OAAO,CAAC,YAAM;IACZ,IAAI,CAAC0B,MAAD,IAAW,CAACsC,MAAhB,EAAwB;IACxBtC,MAAM,CAACoD,OAAP,CAAe1D,KAAf,EAAsBE,MAAtB;EACD,CAHM,EAGJ,CAACF,KAAD,EAAQE,MAAR,CAHI,CAAP;EAMAtB,OAAO,CAAC,YAAM;IACZ,IAAI,CAAC0B,MAAD,IAAW,CAACsC,MAAhB,EAAwB;IACxBlB,UAAU,CAACpB,MAAD,EAAA+C,aAAA,CAAAA,aAAA,KAAavE,cAAb,GAAgCc,OAAhC,EAAV;EACD,CAHM,EAGJ,CAACU,MAAD,EAASV,OAAT,CAHI,CAAP;EAKA,oBACErB,KAAA,CAAAuF,aAAA;IAAUpE,GAAG,EAAEc;EAAf,EADF;AAGD;AAED,4BAAejC,KAAK,CAACwF,UAAN,CAAiB1E,eAAjB,CAAf"},"metadata":{},"sourceType":"module","externalDependencies":[]}